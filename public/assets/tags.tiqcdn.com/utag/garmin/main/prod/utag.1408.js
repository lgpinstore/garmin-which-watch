//tealium universal tag - utag.1408 ut4.0.202507081611, Copyright 2025 Tealium.com Inc. All Rights Reserved.
var _paq=window._paq=window._paq||[];try{(function(id,loader){var u={id:id};utag.o[loader].sender[id]=u;u.ev={view:1,link:1};u.initialized=false;u.scriptrequested=false;u.toBoolean=function(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";};u.clearEmptyKeys=function(object){Object.keys(object).forEach(function(key){if(object[key]===''||object[key]===undefined){delete object[key];}});return object;};u.mapFunc=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.mapFunc(arr,obj[i],item);}else{obj[i]=item;}};u.EVENT={productView:'productView',categoryViews:'categoryViews',addToCart:'addToCart',removeFromCart:'removeFromCart',purchase:'trackEcommerceOrder',resetUserId:'resetUserId',trackGoal:'trackGoal',trackSiteSearch:'trackSiteSearch',trackLink:'trackLink',setCustomDimension:'setCustomDimension',deleteCustomDimension:'deleteCustomDimension',trackEvent:'trackEvent',page_view:'trackPageView'};u.EVENTS_LIST={productView:{defaultParameters:['product_sku','product_name','product_category','product_unit_price'],mandatoryParameters:['product_sku']},categoryViews:{defaultParameters:['product_category'],mandatoryParameters:[]},addToCart:{defaultParameters:['product_sku','product_name','product_category','product_unit_price','product_quantity'],mandatoryParameters:['product_sku']},removeFromCart:{defaultParameters:['product_sku'],mandatoryParameters:['product_sku']},purchase:{defaultParameters:['order_id','grand_total','order_total','order_tax','order_shipping','order_discount'],mandatoryParameters:['order_id','grand_total']},resetUserId:{defaultParameters:[],mandatoryParameters:[]},trackGoal:{defaultParameters:['goal_index'],mandatoryParameters:['goal_index']},trackSiteSearch:{defaultParameters:['searchKeyword','searchCategory','searchResultsCount'],mandatoryParameters:['searchKeyword']},trackLink:{defaultParameters:['linkURL','linkType'],mandatoryParameters:['linkURL']},setCustomDimension:{defaultParameters:['custom_dimension_index','custom_dimension_value'],mandatoryParameters:['custom_dimension_index']},deleteCustomDimension:{defaultParameters:['custom_dimension_index'],mandatoryParameters:['custom_dimension_index']},trackEvent:{defaultParameters:["eventCategory","eventAction","eventName","eventValue"],mandatoryParameters:["eventCategory","eventAction"]},page_view:{defaultParameters:[],mandatoryParameters:[]}};u.prepareParametertsObject=function(event){var parametersObject=u.data[event]||{};if(u.EVENTS_LIST.hasOwnProperty(event)){u.EVENTS_LIST[event].defaultParameters.forEach(function(parameter){if(!parametersObject[parameter]){parametersObject[parameter]=u.data[parameter];}});parametersObject=u.clearEmptyKeys(parametersObject);}
return parametersObject;};u.prepareParamArray=function(eventParametersObject,event){return event.map(function(parameter){return eventParametersObject[parameter];});};u.prepareParamArrayFromMultipleArray=function(eventParametersObject,event,index){return event.map(function(parameter){if(parameter==='product_quantity'&&!eventParametersObject[parameter][index]){eventParametersObject[parameter][index]=1;}
return eventParametersObject[parameter][index]||null;});};u.addCustomDimensionsParameters=function(eventParametersObject,array){var dimensionsParameters={};Object.keys(eventParametersObject).forEach(function(key){if(key.indexOf('dimension')!==-1){dimensionsParameters[key]=eventParametersObject[key];}});if(Object.keys(dimensionsParameters).length){array.push(dimensionsParameters);}
return array;};u.loaderCallback=function(){utag.DB('send:1408:CALLBACK');u.initialized=true;if(u.toBoolean(u.data.track_subdomains)){_paq.push(["setCookieDomain",window.location.hostname]);}
if(u.toBoolean(u.data.prepend_site_domain)){_paq.push(["setDocumentTitle",document.domain+"/"+document.title]);}
if(u.toBoolean(u.data.set_alias_urls)){_paq.push(['setDomains',u.data.alias_urls]);}
if((u.data.eventCategory!==''&&u.data.eventAction!=='')&&!u.data.events.includes("trackEvent")){u.data.events.push('trackEvent');}
u.callback();utag.DB('send:1408:CALLBACK:COMPLETE');};u.callback=function(){if((u.data.events.includes('categoryViews')||u.data.events.includes('productView'))&&!u.data.events.includes('page_view')){u.data.events.push('page_view');}
u.data.events.forEach(function(eventName){u.sendEvent(eventName);});};u.sendEvent=function(eventName){var eventParametersObject=u.prepareParametertsObject(eventName);var parametersArray=u.prepareParamArray(eventParametersObject,u.EVENTS_LIST[eventName].defaultParameters);switch(eventName){case u.EVENT.productView:{eventParametersObject.product_sku.forEach(function(param,index){var productViewParameters=u.prepareParamArrayFromMultipleArray(eventParametersObject,u.EVENTS_LIST[eventName].defaultParameters,index);productViewParameters.unshift('setEcommerceView');_paq.push(productViewParameters);});break;}
case u.EVENT.addToCart:{eventParametersObject.product_sku.forEach(function(param,index){var addToCartParameters=u.prepareParamArrayFromMultipleArray(eventParametersObject,u.EVENTS_LIST[eventName].defaultParameters,index);addToCartParameters.unshift('addEcommerceItem');_paq.push(addToCartParameters);});_paq.push(['trackEcommerceCartUpdate',u.data.order_total]);break;}
case u.EVENT.categoryViews:{eventParametersObject.product_category.forEach(function(param,index){_paq.push(['setEcommerceView',false,false,eventParametersObject.product_category[index]]);});break;}
case u.EVENT.removeFromCart:{eventParametersObject.product_sku.forEach(function(param){_paq.push(['removeEcommerceItem',param]);});_paq.push(['trackEcommerceCartUpdate',u.data.order_total]);break;}
default:{var checkPassed=true;if(u.EVENTS_LIST[eventName]&&u.EVENTS_LIST[eventName].mandatoryParameters){u.EVENTS_LIST[eventName].mandatoryParameters.forEach(function(mandatoryParameter){if(!eventParametersObject.hasOwnProperty(mandatoryParameter)){utag.DB("The '"+eventName+"' event failed because a required parameter '"+mandatoryParameter+"' was missing");checkPassed=false;return;}});}
if(checkPassed){if(eventName=="setCustomDimension"){if(eventParametersObject.custom_dimension_index.length==eventParametersObject.custom_dimension_value.length){for(let i=0;i<eventParametersObject.custom_dimension_index.length;i++){_paq.push(['setCustomDimension',customDimensionId=eventParametersObject.custom_dimension_index[i],customDimensionValue=eventParametersObject.custom_dimension_value[i]]);}}}else{parametersArray=u.addCustomDimensionsParameters(eventParametersObject,parametersArray);parametersArray.unshift(u.EVENT[eventName]);_paq.push(parametersArray);}}}}};u.map={"ut.event:view":"setCustomDimension","ut.event:link":"setCustomDimension","matomo_product_view:true":"productView","matomo_listing_view:true":"categoryViews","event_category":"eventCategory","event_action":"eventAction","event_label":"eventName","event_value":"eventValue","_sm_1408_8":"product_sku","_sm_1408_9":"product_name","_sm_1408_10":"product_category","_sm_1408_11":"product_unit_price","_sm_1408_12":"product_quantity","matomo_dim_value":"custom_dimension_value","matomo_dim_index":"custom_dimension_index","tealium_event:product_view":"trackEvent","tealium_event:slider_click":"trackEvent","tealium_event:aerodata_banner_click":"trackEvent","tealium_event:www_banner_click":"trackEvent","tealium_event:footer_click":"trackEvent","tealium_event:header_click":"trackEvent,trackEvent","tealium_event:select_item":"trackEvent","tealium_event:explore_click":"trackEvent","tealium_event:support_web_manual_menu_bar_click":"trackEvent","tealium_event:product_variant_edition_click":"trackEvent","tealium_event:ugc_select_content":"trackEvent","tealium_event:product_page_click":"trackEvent","tealium_event:ywyw_interstitial_click":"trackEvent","tealium_event:product_page_interstitial_click":"trackEvent","tealium_event:product_carousel_click":"trackEvent","tealium_event:filter_click":"trackEvent","tealium_event:pagenumber_click":"trackEvent","tealium_event:product_page_breadcrumb_click":"trackEvent","tealium_event:dropdown_click":"trackEvent","tealium_event:product_page_sidebar_click":"trackEvent","tealium_event:courses_select_content":"trackEvent","tealium_event:dealer_generic_event":"trackEvent","tealium_event:ac_event":"trackEvent","tealium_event:amc_smc_click":"trackEvent","tealium_event:ps_generic_event":"trackEvent","tealium_event:find_dealer":"trackEvent","tealium_event:cart_add":"addToCart"};u.extend=[function(a,b){try{b['_sm_1408_10']=[b['js_page.tagManagement_categoryName_global']];}catch(e){utag.DB(e);}
try{b['_sm_1408_11']=[parseFloat((b['product_price']||0.00))];}catch(e){utag.DB(e);}
try{b['_sm_1408_12']=[(b['product_quantity']||1)];}catch(e){utag.DB(e);}
try{b['_sm_1408_8']=[b['js_page.tagManagement_skuCode']];}catch(e){utag.DB(e);}
try{b['_sm_1408_9']=[b['product_name']];}catch(e){utag.DB(e);}},function(a,b){try{if(1){if(a=="view"&&b.ecomm_pagetype){if(b.ecomm_pagetype=='product'){b.matomo_product_view=true;}else if(b.ecomm_pagetype=="listing"){b.matomo_listing_view=true;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b.tealium_event=="order_confirmation_view"){if(b.js_page.tagManagement_orderId==sessionStorage.getItem('previousOrderID')){return false;}else{sessionStorage.setItem('previousOrderID',b.js_page.tagManagement_orderId);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){function get_user_consent_state(){let state=utag.gdpr.getConsentState();if(utag.ut.typeOf(state)=="number"){if(state===1){return"Full Consent";}else if(state===0){return"Declined Consent";}else if(state===-1){return"Undecided Consent";}}else if(utag.ut.typeOf(state)=="array"){let accepted_categories=utag.gdpr
.getConsentState()
.filter(function(e){return e.ct==="1";})
.map(function(n){return n.name;})
.join(",");if(accepted_categories===''){return"Declined Consent";}else{return("Partial Consent: "+
utag.gdpr
.getConsentState()
.map(function(e){return e.name;})
.join(","));}}
return"Couldn't Parse Consent";}
b["matomo_gdpr_consent"]=get_user_consent_state();b["matomo_ad_blocking"]=String(utag_data["noBlock"])||String(utag.data["noBlock"])||String(false);b["matomo_currency"]=utag_data["_ccurrency"]||b["_ccurrency"]||utag.data["_ccurrency"]||b['js_page.tagManagement_orderCurrency']||b['js_page.order_currency']||utag.data['js_page.tagManagement_orderCurrency']||utag.data['js_page.order_currency']||"None";b["matomo_utc_time_zone"]=Intl.DateTimeFormat().resolvedOptions().timeZone||b["utc_time"]||"None";function process_dimensions(dimension_map){let dimension_index_array=[];let dimension_value_array=[];Object.entries(dimension_map).forEach((entry)=>{if(b[entry[1]]){dimension_index_array.push(entry[0]);dimension_value_array.push(b[entry[1]]);}});b["matomo_dim_index"]=dimension_index_array;b["matomo_dim_value"]=dimension_value_array;}
let dimension_map_www={1:"matomo_gdpr_consent",2:"matomo_ad_blocking",3:"matomo_currency",4:"matomo_utc_time_zone",9:"product_variant",10:"js_page.pre_sale_chat",11:"js_page.product_name",12:"js_page.support_topics",13:"js_page.support_subtopic",14:"js_page.support_product_family",15:"js_page.sas_source",20:"js_page.tagManagement_pageCategory_global",21:"js_page.tagManagement_categoryName_global",28:"js_page.techpub_html_manuals_guid",29:"js_page.techpub_html_manuals_language",30:"js_page.techpub_html_manuals_market_segment",31:"js_page.techpub_html_manuals_pubguid",32:"js_page.techpub_html_manuals_publication_title",33:"js_page.techpub_html_manuals_publication_type",34:"js_page.techpub_html_manuals_topic_title"
};if(u.id=='1451'){dimension_map_www[15]="ps_sas_source"}
if(u.id=='1452'){dimension_map_www[11]="product_name"}
if(u.id=='1450'||u.id=='1408'||u.id=='1480'){dimension_map_www[11]="js_page.tagManagement_productName_global"}
process_dimensions(dimension_map_www);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var email_regex=/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi;if(utag.data['dom.url'].includes('connect.garmin.com')&&utag.data['dom.pathname'].includes('profile')){b['pii_url']=document.location.href.split('profile')[0]+"profile/redacted";b['pii_title']=document.title||document.location.href.split('//')[1].split('profile')[0]+"profile/redacted";b['event_label']=b['event_label']?b['event_label'].replace(email_regex,'redacted'):"";if(b['event_category']&&b['event_category'].includes('/profile/')){b['event_category']=b.event_category.split('profile')[0]+"profile/redacted";}}
b['pii_url']=b['pii_url']||document.location.href;b['pii_title']=b['pii_title']||document.title;const redact_map=['lat','lng','userid','email_address','jwttokenororderid','order_id','orderid','emailaddress','formfive','pc','username','afftrack','carryuname','sic','password','userpass','email','Email','owner','customerid','companyid','unitid','recipient','onepasswdfill','onepasswdvault','ownername','aircraftid','departure','destination','pilotincommandname','signername','certificateid','studentname','remarks','companyid','userid','firstname','middlename','lastname','streetaddr1','streetaddr2','city','zipcode','homephone','officephone','cellphone','faxphone','newwbusernam','newpassword','email1','assigneddept','textmsgaddr','fpcusername','fpcpassword'];const qp_to_be_removed=['gclid','gclsrc','wbraid'];const vars_to_parse=['pii_url','pii_referrer'];vars_to_parse.forEach(thing=>{let url_split_params=b[thing].split('?');if(url_split_params.length>1){let base_url=url_split_params[0];let qp_arr=url_split_params[1].split('&');let new_qps=[];qp_arr.forEach(qp=>{let key=qp.split('=')[0];let val=qp.split('=')[1];if(redact_map.indexOf(key)>-1){val='[REDACTED]';}
if(!qp_to_be_removed.includes(key)){new_qps.push(key+'='+val);}});let new_url=base_url+'?'+new_qps.join('&');b[thing]=new_url}});u.data.config=u.data.config||{};u.data.location=b['pii_url']||b['dom.url'].split('?')[0]||document.location.href.split('?')[0]||'Undefined';u.data.config.page_location=b['pii_url']||b['dom.url'].split('?')[0]||document.location.href.split('?')[0]||'Undefined';u.data.config.page_referrer=b['pii_referrer']||b['dom.referrer'].split('?')[0]||document.referrer.split('?')[0]||"Undefined";Object.keys(b).forEach(e=>{if(redact_map.indexOf(e)>-1){b[e]='[REDACTED]';}})
let url_mailto=b['dom.url'];let regex_url_mailto=/mailto:/gm;if(url_mailto.match(regex_url_mailto)){url_mailto=url_mailto.split(/(:)/)
Object.keys(url_mailto).forEach(e=>{if(url_mailto[e].indexOf("@")>-1){url_mailto[e]='[REDACTED]';}})
url_mailto=url_mailto.join('');u.data.config=u.data.config||{};u.data.location=url_mailto||'Undefined';u.data.config.page_location=url_mailto||'Undefined';}}}catch(e){utag.DB(e)}}];u.send=function(utag_event,data_layer){if(!u.ev[utag_event]&&u.ev.all===undefined){utag.DB('send:1408:EVENT NOT SUPPORTED:COMPLETE');return;}
utag.DB('send:1408');utag.DB(data_layer);var a,b,c,d,e,f,g,h,query_params;a=utag_event;b=data_layer;u.data={tracker_url:'//matomo.garmin.com/',site_id:'1',track_subdomains:'true',send_page_view:'true',prepend_site_domain:'true',set_alias_urls:'',base_url:'##utag_tracker_url##matomo.js',alias_urls:'',user_id:'',searchKeyword:'',searchCategory:'',searchResultsCount:'',linkURL:'',linkType:'',goal_index:'',eventCategory:'',eventAction:'',eventName:'',eventValue:'',product_sku:[],product_name:[],product_category:[],product_unit_price:[],product_quantity:[],order_discount:[],order_id:'',grand_total:'',order_total:'',order_tax:'',order_shipping:'',custom_dimension_index:'',custom_dimension_value:'',custom:{},events:[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB('send:1408:EXTENSIONS');utag.DB(data_layer);query_params=[];Object.keys(utag.loader.GV(u.map)).forEach(function(mapping_key){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==''){var destinations=u.map[mapping_key].split(',');destinations.forEach(function(parameter){u.mapFunc(parameter.split('.'),u.data,data_layer[mapping_key]);});}else{var event_destinations=mapping_key.split(':');if(event_destinations.length===2&&String(data_layer[event_destinations[0]])===String(event_destinations[1])){if(u.map[mapping_key]){u.data.events=u.data.events.concat(u.map[mapping_key].split(','));}}}});utag.DB('send:1408:MAPPINGS');utag.DB(u.data);var eCommerceMapping=[{eCommerceData:data_layer._csku,name:'product_sku',isArray:true},{eCommerceData:data_layer._cprodname,name:'product_name',isArray:true},{eCommerceData:data_layer._ccat,name:'product_category',isArray:true},{eCommerceData:data_layer._cprice,name:'product_unit_price',isArray:true},{eCommerceData:data_layer._cquan,name:'product_quantity',isArray:true},{eCommerceData:data_layer._corder,name:'order_id',isArray:false},{eCommerceData:data_layer._csubtotal,name:'grand_total',isArray:false},{eCommerceData:data_layer._ctotal,name:'order_total',isArray:false},{eCommerceData:data_layer._ctax,name:'order_tax',isArray:false},{eCommerceData:data_layer._cship,name:'order_shipping',isArray:false},];eCommerceMapping.forEach(function(dataObject){if(!dataObject.isArray){u.data[dataObject.name]=u.data[dataObject.name]||dataObject.eCommerceData||'';}else if(u.data[dataObject.name].length===0&&dataObject.eCommerceData!==undefined&&dataObject.isArray){u.data[dataObject.name]=dataObject.eCommerceData.slice(0);}});if(!u.data.tracker_url){utag.DB(u.id+": Tag not fired: Required attribute 'tracker_url' not populated");return;}
if(!u.data.site_id){utag.DB(u.id+": Tag not fired: Required attribute 'site_id' not populated");return;}
u.data.base_url=u.data.base_url.replace('##utag_tracker_url##',u.data.tracker_url);let consent_status=utag.gdpr.getConsentState();let consent_given=false;if(u.previous_consent_state!==consent_status){u.previous_consent_state=consent_status;if(utag.ut.typeOf(consent_status)=="array"){if(consent_status.includes('analytics')){consent_given=true;}}else{if(consent_status==1){consent_given=true;}}
if(consent_given){_paq.push(['setCookieConsentGiven']);}else{_paq.push(['requireCookieConsent']);}}
_paq.push(["setReferrerUrl",b["dom.referrer"]]);_paq.push(["setCustomUrl",(b['pii_url']||b["dom.url"])]);_paq.push(["setDocumentTitle",(b['pii_title']||b["dom.title"])]);if(u.initialized){if(utag_event=="view"&&u.toBoolean(u.data.send_page_view)){u.data.events.push('page_view')}
u.callback();}else{if(!u.scriptrequested){if(u.toBoolean(u.data.send_page_view)){u.data.events.push('page_view')}
_paq.push(["enableLinkTracking"]);utag.DB(u.id+": Adding primary tracker");let tracking_urls=u.data.tracker_url.split(",");let site_ids=u.data.site_id.split(",");_paq.push(["setTrackerUrl",tracking_urls.shift().trim()+"matomo.php"]);_paq.push(["setSiteId",parseInt(site_ids.shift().trim())]);for(let i=0;i<tracking_urls.length;i++){utag.DB(u.id+": Adding secondary trackers");try{if(tracking_urls[i]&&site_ids[i]){_paq.push(["addTracker",tracking_urls[i].trim()+"matomo.php",parseInt(site_ids[i].trim())]);}}catch(e){utag.DB(u.id+": Failed to add other tracking URLs and ID's - Make sure they both have the same number of elements");}}
if(u.data.user_id){_paq.push(["setUserId",u.data.user_id]);}
u.scriptrequested=true;utag.ut.loader({type:"script",src:u.data.tracker_url.split(",")[0]+"matomo.js",cb:u.loaderCallback,loc:"script",id:"utag_1408",attrs:{},});}}
utag.DB('send:1408:COMPLETE');};utag.o[loader].loader.LOAD(id);}('1408','garmin.main'));}catch(error){utag.DB(error);}
